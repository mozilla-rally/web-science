<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Module: scheduling</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Module: scheduling</h1>

    




<section>

<header>
    
        
            
        
    
</header>

<article>
    <div class="container-overview">
    
        
            <div class="description"><p>This module enables subscribing to periodic events, currently on a daily or
weekly schedule.</p>
<p>The module guarantees a lower bound on when the event will fire, rather than
a precise time for when the event will fire. This constraint is because
the browser may not be open when the event would next fire, and because the
module attempts to wait for an idle state to avoid browser jank.</p>
<p>The heuristic for determining when to fire the next idle daily event is
identical to the heuristic used for the <code>idle-daily</code> event issued by the
Firefox <a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIIdleService"><code>nsIdleService</code></a>.</p>
<ol>
<li>Wait a day since the most recent idle daily event, or if the extension
was just installed, wait a day after install.</li>
<li>Listen for the next idle state, with a detection interval of 3 minutes.</li>
<li>If an idle state does not occur within 24 hours, shorten the detection
interval to 1 minute.</li>
</ol>
<p>The idle daily event fires as soon as the browser enters an idle state that
satisfies the heuristic. The idle weekly event fires just after an idle
daily event when it has been at least 7 days since the last idle weekly
event.</p>
<p>Some implementation quirks to be aware of for use and future development:</p>
<ul>
<li>
<p>This module does not subscribe to the <code>idle-daily</code> event from the
<code>nsIdleService</code> to minimize privileged extension code and so that it
runs on a different schedule from Firefox daily tasks (e.g., Telemetry).</p>
</li>
<li>
<p>This module uses <code>setTimeout</code> to handle corner cases where the browser
goes idle before the idle daily event should fire and remains idle
through when the idle daily event should fire. The timeouts are
configured on startup (and periodically) based on timestamps in
persistent storage, so it is not a problem that timeouts do not
persist between browser sessions.</p>
</li>
</ul></div>
        

        
            















<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="scheduling.js.html">scheduling.js</a>, <a href="scheduling.js.html#line1">line 1</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
    
    </div>

    

    

    

    

    

    
        <h3 class="subsection-title">Namespaces</h3>

        <dl>
            <dt><a href="module-scheduling.onIdleDaily.html">onIdleDaily</a></dt>
            <dd></dd>
        
            <dt><a href="module-scheduling.onIdleWeekly.html">onIdleWeekly</a></dt>
            <dd></dd>
        </dl>
    

    

    

    

    
</article>

</section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-debugging.html">debugging</a></li><li><a href="module-events.html">events</a></li><li><a href="module-id.html">id</a></li><li><a href="module-idle.html">idle</a></li><li><a href="module-inline.html">inline</a></li><li><a href="module-linkExposure.html">linkExposure</a></li><li><a href="module-linkResolution.html">linkResolution</a></li><li><a href="module-matching.html">matching</a></li><li><a href="module-messaging.html">messaging</a></li><li><a href="module-pageManager.html">pageManager</a></li><li><a href="module-pageNavigation.html">pageNavigation</a></li><li><a href="module-pageText.html">pageText</a></li><li><a href="module-pageTransition.html">pageTransition</a></li><li><a href="module-permissions.html">permissions</a></li><li><a href="module-randomization.html">randomization</a></li><li><a href="module-scheduling.html">scheduling</a></li><li><a href="module-socialMediaActivity.html">socialMediaActivity</a></li><li><a href="module-socialMediaLinkSharing.html">socialMediaLinkSharing</a></li><li><a href="module-storage.html">storage</a></li><li><a href="module-timing.html">timing</a></li><li><a href="module-userSurvey.html">userSurvey</a></li><li><a href="module-workers.html">workers</a></li></ul><h3>Namespaces</h3><ul><li><a href="module-idle.onStateChanged.html">onStateChanged</a></li><li><a href="module-linkExposure.onLinkExposureData.html">onLinkExposureData</a></li><li><a href="module-linkExposure.onLinkExposureUpdate.html">onLinkExposureUpdate</a></li><li><a href="module-messaging.onMessage.html">onMessage</a></li><li><a href="module-pageManager.onPageVisitStart.html">onPageVisitStart</a></li><li><a href="module-pageManager.onPageVisitStop.html">onPageVisitStop</a></li><li><a href="module-pageNavigation.onPageData.html">onPageData</a></li><li><a href="module-pageText.onTextParsed.html">onTextParsed</a></li><li><a href="module-pageTransition.onPageTransitionData.html">onPageTransitionData</a></li><li><a href="module-scheduling.onIdleDaily.html">onIdleDaily</a></li><li><a href="module-scheduling.onIdleWeekly.html">onIdleWeekly</a></li></ul><h3>Classes</h3><ul><li><a href="module-events-Event.html">Event</a></li><li><a href="module-matching-MatchPatternSet.html">MatchPatternSet</a></li><li><a href="module-storage-Counter.html">Counter</a></li><li><a href="module-storage-KeyValueStorage.html">KeyValueStorage</a></li></ul><h3>Global</h3><ul><li><a href="global.html#registerContentScript">registerContentScript</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.10</a> on Wed Jul 13 2022 18:05:21 GMT+0000 (Coordinated Universal Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>