<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Module: userSurvey</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Module: userSurvey</h1>

    




<section>

<header>
    
        
            
        
    
</header>

<article>
    <div class="container-overview">
    
        
            <div class="description"><p>A module to facilitate surveys of study participants. See the
documentation for <code>setSurvey</code> for additional details about usage.</p>
<h2>User Experience</h2>
<ul>
<li>If the user has not been previously prompted for the survey,
the survey will open in a new tab.</li>
<li>The study's browser action popup will contain either a page
prompting the user to complete the survey (with options to open
the survey or decline the survey), or a neutral page (if the
user has already completed or declined the survey).</li>
<li>If the user has been previously prompted for the survey, and
has not completed or declined the survey, the user will be
reminded to complete the survey with a browser notification
at a set interval.</li>
</ul>
<h2>Limitations</h2>
<p>Note that this module is currently very limited: it only supports
one survey at a time per study, with few options and a constrained design.
We have not yet decided whether to build out this module or implement
survey functionality in the Rally core add-on.</p></div>
        

        
            















<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="userSurvey.js.html">userSurvey.js</a>, <a href="userSurvey.js.html#line1">line 1</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
    
    </div>

    

    

    

    

    

    

    

    
        <h3 class="subsection-title">Methods</h3>

        
            

    

    
    <h4 class="name" id=".endSurvey"><span class="type-signature">(static) </span>endSurvey<span class="signature">()</span><span class="type-signature"> &rarr; {Promise}</span></h4>
    

    



<div class="description">
    <p>End the current survey. If there is a current survey, you must call
this function before starting a new survey.</p>
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="userSurvey.js.html">userSurvey.js</a>, <a href="userSurvey.js.html#line389">line 389</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    <p>A Promise that resolves when the survey has been
ended.</p>
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise</span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id=".getSurveyId"><span class="type-signature">(static) </span>getSurveyId<span class="signature">()</span><span class="type-signature"> &rarr; {Promise.&lt;string>}</span></h4>
    

    



<div class="description">
    <p>Each study participant has a persistent survey ID, generated with
the <code>id</code> module. The ID is automatically added as a parameter to
the survey URL, enabling researchers to import survey data from an
external platform and sync it with Rally data. This method returns the
survey ID, generating it if it does not already exist.</p>
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="userSurvey.js.html">userSurvey.js</a>, <a href="userSurvey.js.html#line337">line 337</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    <ul>
<li>The participant's survey ID.</li>
</ul>
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise.&lt;string></span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id=".getSurveyName"><span class="type-signature">(static) </span>getSurveyName<span class="signature">()</span><span class="type-signature"> &rarr; {Promise.&lt;string>|Promise.&lt;null>}</span></h4>
    

    



<div class="description">
    <p>Gets the name of the current survey.</p>
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="userSurvey.js.html">userSurvey.js</a>, <a href="userSurvey.js.html#line377">line 377</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    <ul>
<li>The name of the current survey. Returns null
if there is no current survey.</li>
</ul>
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise.&lt;string></span>
|

<span class="param-type">Promise.&lt;null></span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id=".getSurveyStatus"><span class="type-signature">(static) </span>getSurveyStatus<span class="signature">()</span><span class="type-signature"> &rarr; {Promise.&lt;string>|Promise.&lt;null>}</span></h4>
    

    



<div class="description">
    <p>Gets the status of the current survey. Can be used if a
subsequent survey depends on the status of the previous survey.</p>
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="userSurvey.js.html">userSurvey.js</a>, <a href="userSurvey.js.html#line354">line 354</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    <ul>
<li>The status of the current
survey (&quot;completed&quot;, &quot;cancelled&quot;, or &quot;active&quot;), or null if there is no
current survey.</li>
</ul>
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise.&lt;string></span>
|

<span class="param-type">Promise.&lt;null></span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id=".setSurvey"><span class="type-signature">(static) </span>setSurvey<span class="signature">(options)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>Prompt the user to respond to a survey. There can only be one current survey at a time.</p>
<h5>Survey Behavior</h5>
<ul>
<li>If there is no current survey (i.e., if <code>setSurvey</code> was not previously called or
<code>endSurvey</code> was called after <code>setSurvey</code>), this function creates a new current
survey with the provided options, persists current survey details in storage, and
configures survey UX.</li>
<li>If there is a current survey and <code>options.surveyName</code> matches the name of the
current survey, this function continues the current survey with the details persisted
in storage and configures survey UX.</li>
<li>If there is already a current survey and <code>options.surveyName</code> does not match the
name of the current survey, throws an <code>Error</code> as there can only be one current survey
at a time.</li>
</ul>
<h5>Single-Survey Studies</h5>
<p>If your study involves a single survey, call <code>setSurvey</code> when you first want to prompt
the user to complete the survey, then call <code>setSurvey</code> with an identical survey name on
subsequent extension startups to continue the survey.</p>
<h5>Multi-Survey Studies</h5>
<p>If there is more than one survey in your study, you must call <code>endSurvey</code> for the current
survey before calling <code>setSurvey</code> for the next survey.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>options</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            

            

            <td class="description last"><p>The options for the survey.</p>
                <h6>Properties</h6>
                

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>surveyName</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            

            <td class="description last"><p>A unique name for the survey within the study.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>popupNoPromptMessage</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            

            <td class="description last"><p>A message to present to the
user when there is no survey to prompt.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>popupPromptMessage</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            

            <td class="description last"><p>A message to present to the user
when there is a survey to prompt.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>popupIcon</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last"><p>A path to an icon file, relative
to the study extension's root, to use for for the browser action popup.
This property is optional as the popup does not need to display an icon.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>reminderIcon</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last"><p>A path to an icon file, relative
to the study extension's root, to use for for reminding the user with a
notification to complete the survey. This property is optional as the
notification does not need to display an icon.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>reminderInterval</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            

            <td class="description last"><p>How often, in seconds, to wait before
reminding the user with a notification to participate in the survey.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>reminderMessage</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            

            <td class="description last"><p>The message to use for reminding the
user with a notification to complete the survey.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>reminderTitle</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            

            <td class="description last"><p>The title to use for reminding the
user with a notification to complete the survey.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>surveyCompletionUrl</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            

            <td class="description last"><p>A URL that, when loaded,
indicates the user has completed the survey.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>surveyUrl</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            

            <td class="description last"><p>The URL for the survey on an external
platform (e.g., SurveyMonkey, Typeform, Qualtrics, etc.).</p></td>
        </tr>

    
    </tbody>
</table>

            </td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="userSurvey.js.html">userSurvey.js</a>, <a href="userSurvey.js.html#line232">line 232</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
    

    

    
</article>

</section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-debugging.html">debugging</a></li><li><a href="module-events.html">events</a></li><li><a href="module-id.html">id</a></li><li><a href="module-idle.html">idle</a></li><li><a href="module-inline.html">inline</a></li><li><a href="module-linkExposure.html">linkExposure</a></li><li><a href="module-linkResolution.html">linkResolution</a></li><li><a href="module-matching.html">matching</a></li><li><a href="module-messaging.html">messaging</a></li><li><a href="module-pageManager.html">pageManager</a></li><li><a href="module-pageNavigation.html">pageNavigation</a></li><li><a href="module-pageText.html">pageText</a></li><li><a href="module-pageTransition.html">pageTransition</a></li><li><a href="module-permissions.html">permissions</a></li><li><a href="module-randomization.html">randomization</a></li><li><a href="module-scheduling.html">scheduling</a></li><li><a href="module-socialMediaActivity.html">socialMediaActivity</a></li><li><a href="module-socialMediaLinkSharing.html">socialMediaLinkSharing</a></li><li><a href="module-storage.html">storage</a></li><li><a href="module-timing.html">timing</a></li><li><a href="module-userSurvey.html">userSurvey</a></li><li><a href="module-workers.html">workers</a></li></ul><h3>Namespaces</h3><ul><li><a href="module-idle.onStateChanged.html">onStateChanged</a></li><li><a href="module-linkExposure.onLinkExposureData.html">onLinkExposureData</a></li><li><a href="module-linkExposure.onLinkExposureUpdate.html">onLinkExposureUpdate</a></li><li><a href="module-messaging.onMessage.html">onMessage</a></li><li><a href="module-pageManager.onPageVisitStart.html">onPageVisitStart</a></li><li><a href="module-pageManager.onPageVisitStop.html">onPageVisitStop</a></li><li><a href="module-pageNavigation.onPageData.html">onPageData</a></li><li><a href="module-pageText.onTextParsed.html">onTextParsed</a></li><li><a href="module-pageTransition.onPageTransitionData.html">onPageTransitionData</a></li><li><a href="module-scheduling.onIdleDaily.html">onIdleDaily</a></li><li><a href="module-scheduling.onIdleWeekly.html">onIdleWeekly</a></li></ul><h3>Classes</h3><ul><li><a href="module-events-Event.html">Event</a></li><li><a href="module-matching-MatchPatternSet.html">MatchPatternSet</a></li><li><a href="module-storage-Counter.html">Counter</a></li><li><a href="module-storage-KeyValueStorage.html">KeyValueStorage</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.7</a> on Fri Jan 21 2022 05:04:36 GMT+0000 (Coordinated Universal Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>